import minimist from "minimist";
import deploy from "./commands/deploy.js";

const argv = minimist(process.argv.slice(2));
const cmd = argv._[0];

if (argv.help) {
  console.log(`colyseus-cloud deploy

Options:
  --env [env]       The deployment environment (default: "production")
  --reset           Reset application selection for deployment
  --preview         Open web interface to preview the deployment.

Usage examples:

  npx @colyseus/cloud deploy --env testing
  npx @colyseus/cloud deploy --reset
  npx @colyseus/cloud deploy --preview

`);
  process.exit();
}

const commands = { deploy, };

if (!commands[cmd]) {
  console.error(`"${cmd}" is not a valid command!`);
  process.exit(1);

} else {
  commands[cmd](argv);
}
