define("@dcl/l2-scene-utils",["exports","@decentraland/EthereumController","@decentraland/web3-provider","eth-connect","decentraland-transactions"],(function(e,t,n,r,a){"use strict";function f(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var o=f(r),c=f(a);function i(e,t,n,r){return new(n||(n=Promise))((function(a,f){function o(e){try{i(r.next(e))}catch(e){f(e)}}function c(e){try{i(r.throw(e))}catch(e){f(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}i((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,a,f,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return f={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function c(f){return function(c){return function(f){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&f[0]?r.return:f[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,f[1])).done)return a;switch(r=0,a&&(f=[2&f[0],a.value]),f[0]){case 0:case 1:a=f;break;case 4:return o.label++,{value:f[1],done:!1};case 5:o.label++,r=f[1],f=[0];continue;case 7:f=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==f[0]&&2!==f[0])){o=0;continue}if(3===f[0]&&(!a||f[1]>a[0]&&f[1]<a[3])){o.label=f[1];break}if(6===f[0]&&o.label<a[1]){o.label=a[1],a=f;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(f);break}a[2]&&o.ops.pop(),o.trys.pop();continue}f=t.call(e,o)}catch(e){f=[6,e],r=0}finally{n=a=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([f,c])}}}function s(e){var t=e.requestManager,n=e.metaRequestManager,r=e.fromAddress;function a(){return i(this,void 0,void 0,(function(){var e,t;return u(this,(function(r){switch(r.label){case 0:return e=c.getContract(c.ContractName.MANAToken,137),[4,new o.ContractFactory(n,e.abi).at(e.address)];case 1:return t=r.sent(),[2,{manaConfig:e,contract:t}]}}))}))}return{transfer:function(e,r){return i(this,void 0,void 0,(function(){var f,o,i,s;return u(this,(function(u){switch(u.label){case 0:return[4,a()];case 1:return f=u.sent(),o=f.manaConfig,i=f.contract,s=i.transfer.toPayload(e,r),[4,c.sendMetaTransaction(t,n,s.data,o,{serverURL:"https://transactions-api.decentraland.org/v1"})];case 2:return[2,u.sent()]}}))}))},balance:function(e){return i(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return[4,a()];case 1:return(t=n.sent()).manaConfig,[4,t.contract.balanceOf(e||r)];case 2:return[2,n.sent()]}}))}))},allowance:function(e,t){return i(this,void 0,void 0,(function(){var n;return u(this,(function(f){switch(f.label){case 0:return[4,a()];case 1:return(n=f.sent()).manaConfig,[4,n.contract.allowance(t||r,e)];case 2:return[2,f.sent()]}}))}))},approve:function(e,r){return i(this,void 0,void 0,(function(){var f,o,i,s;return u(this,(function(u){switch(u.label){case 0:return[4,a()];case 1:return f=u.sent(),o=f.manaConfig,i=f.contract,s=i.approve.toPayload(e,r||"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),[4,c.sendMetaTransaction(t,n,s.data,o,{serverURL:"https://transactions-api.decentraland.org/v1"})];case 2:return[2,u.sent()]}}))}))}}}e.createComponents=function(){return i(this,void 0,void 0,(function(){var e,r,a,f,c;return u(this,(function(i){switch(i.label){case 0:return[4,n.getProvider()];case 1:return e=i.sent(),r=new o.RequestManager(e),a=new o.HTTPProvider("https://polygon-rpc.com"),[4,t.getUserAccount()];case 2:return f=i.sent(),c=new o.RequestManager(a),[4,s({requestManager:r,metaProvider:a,metaRequestManager:c,fromAddress:f})];case 3:return[2,{mana:i.sent()}]}}))}))}}));
//# sourceMappingURL=index.js.map
